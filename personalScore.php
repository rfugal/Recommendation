<?php

$firstQuartileFactor = 23;
$secondQuartileFactor = 47;
$otherQuartileFactor = 101;
$unrecognizedFactor = 344;
$recognizedFactor = -22;

$Frequency = array(
    "the" => 1,
    "is" => 1,
    "be" => 1,
    "and" => 1,
    "of" => 1,
    "to" => 1,
    "he" => 1,
    "you" => 1,
    "in" => 1,
    "she" => 1,
    "have" => 1,
    "it" => 1,
    "do" => 1,
    "his" => 1,
    "her" => 1,
    "say" => 2,
    "for" => 2,
    "with" => 2,
    "on" => 2,
    "but" => 2,
    "my" => 2,
    "at" => 2,
    "that" => 2,
    "they" => 2,
    "me" => 2,
    "go" => 2,
    "what" => 2,
    "as" => 2,
    "we" => 2,
    "not" => 2,
    "him" => 2,
    "from" => 2,
    "this" => 2,
    "get" => 2,
    "up" => 2,
    "know" => 2,
    "would" => 2,
    "look" => 2,
    "could" => 2,
    "all" => 2,
    "see" => 2,
    "out" => 2,
    "if" => 2,
    "into" => 2,
    "your" => 2,
    "can" => 2,
    "come" => 2,
    "then" => 2,
    "think" => 2,
    "make" => 2,
    "them" => 2,
    "just" => 2,
    "so" => 2,
    "about" => 2,
    "take" => 2,
    "will" => 2,
    "when" => 2,
    "one" => 2,
    "time" => 2,
    "their" => 2,
    "like" => 2,
    "by" => 2,
    "man" => 2,
    "want" => 2,
    "who" => 2,
    "now" => 2,
    "tell" => 2,
    "or" => 2,
    "back" => 2,
    "how" => 2,
    "down" => 2,
    "there" => 2,
    "ask" => 2,
    "here" => 2,
    "eye" => 2,
    "day" => 2,
    "hand" => 2,
    "too" => 2,
    "some" => 2,
    "way" => 2,
    "find" => 2,
    "give" => 2,
    "feel" => 2,
    "thing" => 2,
    "turn" => 2,
    "head" => 2,
    "old" => 2,
    "hear" => 2,
    "good" => 2,
    "two" => 2,
    "never" => 2,
    "let" => 2,
    "mother" => 2,
    "than" => 2,
    "try" => 2,
    "why" => 2,
    "leave" => 2,
    "again" => 2,
    "our" => 2,
    "no" => 2,
    "year" => 2,
    "even" => 2,
    "call" => 2,
    "us" => 2,
    "something" => 2,
    "people" => 2,
    "through" => 2,
    "door" => 2,
    "well" => 2,
    "only" => 2,
    "father" => 2,
    "first" => 2,
    "run" => 2,
    "over" => 2,
    "still" => 2,
    "boy" => 2,
    "friend" => 2,
    "stand" => 2,
    "face" => 2,
    "sit" => 2,
    "away" => 2,
    "other" => 2,
    "put" => 2,
    "off" => 2,
    "house" => 2,
    "keep" => 2,
    "room" => 2,
    "walk" => 2,
    "woman" => 2,
    "need" => 2,
    "little" => 2,
    "school" => 2,
    "big" => 2,
    "girl" => 2,
    "night" => 2,
    "stop" => 2,
    "after" => 2,
    "right" => 2,
    "more" => 2,
    "help" => 2,
    "start" => 2,
    "very" => 2,
    "hold" => 2,
    "scene" => 2,
    "any" => 2,
    "must" => 2,
    "should" => 2,
    "life" => 2,
    "new" => 2,
    "because" => 2,
    "begin" => 2,
    "word" => 2,
    "wait" => 2,
    "where" => 2,
    "talk" => 2,
    "next" => 2,
    "really" => 2,
    "seem" => 2,
    "which" => 2,
    "work" => 2,
    "another" => 2,
    "around" => 2,
    "own" => 2,
    "watch" => 2,
    "always" => 2,
    "home" => 2,
    "last" => 2,
    "those" => 2,
    "voice" => 2,
    "mean" => 2,
    "oh" => 2,
    "every" => 2,
    "yes" => 2,
    "ever" => 2,
    "three" => 2,
    "foot" => 2,
    "move" => 2,
    "arm" => 2,
    "play" => 2,
    "its" => 2
);
$FrequencyScore = 0;

$Words = json_decode($_POST["UNKWords"]);
$clientScore = $_POST["bookPercent"];
$wordCount = $_POST["wordCount"];
$recognizedCount = $wordCount * $clientScore;
$unrecognizedCount = $wordCount - $recognizedCount;

foreach ($Words as $word) {
    if ($Frequency[$word] = 1) {
        $FrequencyScore += $firstQuartileFactor;
    } else if ($Frequency[$word] = 2) {
        $FrequencyScore += $secondQuartileFactor;
    } else {
        $FrequencyScore += $otherQuartileFactor;
    };
};

$returnScore = (
    $FrequencyScore +
    $unrecognizedCount * $unrecognizedFactor +
    $recognizedCount * $recognizedFactor
) / $wordCount;

echo (round($returnScore));

?>
